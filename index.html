<!DOCTYPE html>
<html lang="ko" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVMS Dashboard — 건설사업관리</title>
    <meta name="description" content="EVMS 건설사업관리 종합 대시보드. 원가, 공정, 물량, 조직, 기성, 생산성 분석.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+KR:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap 5 (minimal, grid + utilities only) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/style.css?v=32" rel="stylesheet">
</head>

<body>

    <!-- ─── Loading Screen ──────────────────────────────────── -->
    <div id="loading-screen">
        <div style="text-align:center">
            <div class="loading-spinner"></div>
            <p style="color:var(--text-secondary);font-size:0.82rem;font-weight:500">데이터베이스 로딩 중...</p>
        </div>
    </div>

    <!-- ─── App Layout ──────────────────────────────────────── -->
    <div class="app-layout">

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">

            <div class="sidebar-cube-area" id="sidebar-cube-area">
                <div class="cube-container">
                    <div class="cube">
                        <div class="front">WHO</div>
                        <div class="back">WHEN</div>
                        <div class="right">WHERE</div>
                        <div class="left">WHAT</div>
                        <div class="top">HOW</div>
                        <div class="bottom">WHY</div>
                    </div>
                </div>
                <div class="cube-label">AI Data Cube</div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section-title">PMIS 메뉴</div>
                <a href="#/overview" class="nav-link active" data-section="overview">
                    <i class="fa-solid fa-gauge-high"></i><span>프로젝트 개요</span>
                </a>
                <a href="#/cost" class="nav-link" data-section="cost">
                    <i class="fa-solid fa-coins"></i><span>원가관리</span>
                </a>
                <a href="#/schedule" class="nav-link" data-section="schedule">
                    <i class="fa-solid fa-calendar-days"></i><span>공정관리</span>
                </a>
                <a href="#/quantity" class="nav-link" data-section="quantity">
                    <i class="fa-solid fa-boxes-stacked"></i><span>자재관리</span>
                </a>
                <a href="#/organization" class="nav-link" data-section="organization">
                    <i class="fa-solid fa-building-user"></i><span>조직관리</span>
                </a>

                <a href="#/evms" class="nav-link" data-section="evms">
                    <i class="fa-solid fa-chart-area"></i><span>진도관리</span>
                </a>
                <a href="#/productivity" class="nav-link" data-section="productivity">
                    <i class="fa-solid fa-arrow-up-right-dots"></i><span>생산성관리</span>
                </a>

                <div class="nav-section-title"
                    style="margin-top:12px;border-top:1px solid var(--border);padding-top:12px">AI Intelligence</div>
                <a href="#/ai" class="nav-link" data-section="ai">
                    <i class="fa-solid fa-robot"></i><span>Chat with AI</span>
                </a>
                <a href="#/cube" class="nav-link" data-section="cube">
                    <i class="fa-solid fa-cubes"></i><span>CUBE View</span>
                </a>
                <a href="#/report" class="nav-link" data-section="report">
                    <i class="fa-solid fa-file-lines"></i><span>AI Report</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <button class="theme-btn" id="theme-toggle">
                    <i class="fa-solid fa-sun"></i>
                    <span>테마 전환</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Mobile sidebar toggle (hidden on desktop) -->
            <button class="sidebar-toggle-btn d-lg-none" id="sidebar-toggle"
                style="position:fixed;top:12px;left:12px;z-index:101">
                <i class="fa-solid fa-bars"></i>
            </button>

            <!-- Global Header (fixed, all pages) -->
            <div id="global-header"></div>

            <!-- Content Area -->
            <div class="content-wrapper" id="content-area">
                <!-- Pages are rendered here by SPA router -->
            </div>
        </main>

    </div>

    <!-- ─── Scripts ──────────────────────────────────────────── -->
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- sql.js (WASM) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.2/sql-wasm.min.js"></script>

    <!-- DB Module (must load before app.js) -->
    <script src="js/db_modules.js?v=29"></script>
    <!-- Main App (Components + Router) -->
    <script src="js/app.js?v=29"></script>
    <!-- Page Modules -->
    <script src="js/pages/overview.js?v=29"></script>
    <script src="js/pages/cost.js?v=29"></script>
    <script src="js/outline_gantt.js?v=29"></script>
    <script src="js/pages/schedule.js?v=29"></script>
    <script src="js/pages/quantity.js?v=29"></script>
    <script src="js/org_charts.js?v=29"></script>
    <script src="js/pages/organization.js?v=29"></script>
    <script src="js/pages/evms.js?v=29"></script>
    <script src="js/pages/productivity.js?v=29"></script>
    <script src="js/ai_engine.js?v=29"></script>
    <script src="js/pages/ai_analysis.js?v=29"></script>
    <script src="js/pages/cube_view.js?v=30"></script>
    <script src="js/pages/ai_report.js?v=30"></script>

    <!-- Current date display -->
    <script>
        (function () {
            var d = new Date();
            var el = document.getElementById('current-date');
            if (el) el.textContent = d.getFullYear() + '.' +
                String(d.getMonth() + 1).padStart(2, '0') + '.' +
                String(d.getDate()).padStart(2, '0');
        })();
    </script>

</body>

</html>